<app-loading-spinner></app-loading-spinner>

<div class="notificaciones-container">
  <p-toolbar class="custom-toolbar">
    <ng-template #start>
      <div class="d-flex gap-2 flex-wrap">
        <p-iconfield iconPosition="left">
          <p-inputicon>
            <i class="pi pi-search"></i>
          </p-inputicon>
          <input
            type="text"
            pInputText
            placeholder="Buscar por título o mensaje..."
            [(ngModel)]="terminoBusqueda"
            (input)="aplicarFiltros()"
          />
        </p-iconfield>
        <p-button
          class="button-fiter"
          [icon]="filtrosVisibles ? 'pi pi-filter-slash' : 'pi pi-filter'"
          label="Filtros"
          styleClass="btn-info btn-v2 btn-md"
          tooltipPosition="bottom"
          (onClick)="toggleFiltrosColumnas()"
          [loading]="loading"
        >
        </p-button>
        <p-button
          *ngIf="terminoBusqueda"
          icon="pi pi-times" label="Limpiar" styleClass="p-button-danger"
          (onClick)="limpiarFiltros()"></p-button>
      </div>
    </ng-template>

    <ng-template #end>
      <div class="d-flex gap-2">
        <p-button icon="pi pi-plus" label="Nueva Notificación" styleClass="p-button-primary"
          (onClick)="abrirDialogoCrear()"></p-button>
      </div>
    </ng-template>
  </p-toolbar>

  <p-divider></p-divider>

  <shared-data-table #dataTable [config]="notificacionesTableConfig"></shared-data-table>
</div>

<!-- Componente de crear/editar notificación -->
<app-notificacion-form
  #notificacionFormComponent
  (notificacionCreada)="onNotificacionCreada()"
  (notificacionActualizada)="onNotificacionActualizada()">
</app-notificacion-form>

